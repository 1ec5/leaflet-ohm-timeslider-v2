<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>OpenHistoricalMap :: Leaflet MBGL TimeSlider Control Demo</title>

    <!-- Leaflet and Mapbox GL JS API, the the adapter for using MB within L -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css" rel="stylesheet" />

    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.css" rel="stylesheet" />

    <script src="https://unpkg.com/mapbox-gl-leaflet@0.0.15/leaflet-mapbox-gl.js"></script>

    <!-- the timeslider control and suporting DecimalDate library -->
    <!-- pick either the minified or full-length version -->
    <script src="decimaldate.js"></script>
    <script src="leaflet-ohm-timeslider.js"></script>
    <link href="leaflet-ohm-timeslider.css" rel="stylesheet" />
    <!--
    <script src="decimaldate.min.js"></script>
    <script src="leaflet-ohm-timeslider.min.js"></script>
    <link href="leaflet-ohm-timeslider.min.css" rel="stylesheet" />
    -->

    <!-- a map style-->
    <script src="mapstyle.js"></script>
</head>
<body>


    <div id="map"></div>


    <style>
    body, html {
      margin: 0;
      padding: 0;
    }
    #map {
      background-color: #ccc;
      width: 100vw;
      height: 100vh;
    }
    </style>


    <script>
    const START_ZOOM = 14.0;
    const START_CENTER = [ 47.6062, -122.3321 ];

    let MAP, TIMESLIDER, OHMLAYER;

    document.addEventListener('DOMContentLoaded', function () {
      MAP = L.map('map', {
        zoomSnap: 0.1,
      })
      .setView(START_CENTER, START_ZOOM);

      L.control.scale().addTo(MAP);

      OHMLAYER = new L.MapboxGL({
        attribution: "<a href='http://wiki.openstreetmap.org/wiki/OHM'>OHM</a>",
        style: OHM_MAP_STYLE,
        accessToken: "no-token",
      });
      OHMLAYER.addTo(MAP);

      TIMESLIDER = new L.Control.OHMTimeSlider({
        vectorLayer: OHMLAYER,
        vectorSourceName: 'osm',
        range: ['1850-01-01', '2020-12-31'],
        date: '1986-06-15',
        language: 'en-US',
      }).addTo(MAP);
    });
    </script>

</body>
</html>
